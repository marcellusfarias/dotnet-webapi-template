version: '3.4'

# This is a production-ready docker compose file.
# It's intended to be used in Docker Swarm mode.
services:
  api:
    image: ghcr.io/marcellusfarias/dotnet-webapi-template:latest
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
    volumes: 
      - certs:/root/.aspnet/https:ro
    secrets:
      - JwtSettings__SigningKey
      - ConnectionStrings__DefaultConnection

volumes:
  certs:

secrets:
  JwtSettings__SigningKey:
    external: true
  ConnectionStrings__DefaultConnection:
    external: true